!function(e){var t={};function r(u){if(t[u])return t[u].exports;var a=t[u]={i:u,l:!1,exports:{}};return e[u].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,u){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:u})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(u,a,function(t){return e[t]}.bind(null,a));return u},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){function r(){this.a=[],this.b=0,this.residue=null}function u(){this.ssrcQueueMap=new Map,u.prototype.AddQueue=function(e){var t=new r;return this.ssrcQueueMap.set(e,t),t},u.prototype.DeleteQueue=function(e){this.ssrcQueueMap.delete(e)},u.prototype.GetQueue=function(e){return this.ssrcQueueMap.get(e)},u.prototype.GetQueueData=function(e){return this.ssrcQueueMap.get(e).dequeue()},u.prototype.PutQueueData=function(e,t){this.ssrcQueueMap.get(e).enqueue(t)},u.prototype.GetQueueLength=function(e){var t=this.ssrcQueueMap.get(e);return null!==t?t.getLength():0}}r.prototype.getLength=function(){return this.a.length-this.b},r.prototype.isEmpty=function(){return 0==this.a.length},r.prototype.enqueue=function(e){this.a.push(e)},r.prototype.dequeue=function(){if(0!=this.a.length){var e=this.a[this.b];return 2*++this.b>=this.a.length&&(this.a=this.a.slice(this.b),this.b=0),e}return null},r.prototype.peek=function(){return 0<this.a.length?this.a[this.b]:void 0};var a=function(){function e(){this.map=new Map,this.AudioQueueMGR=new u,this.timemap=new Map}return e.prototype.Add=function(e,t){this.map.put(e,t),this.AudioQueueMGR.AddQueue(e)},e.prototype.Clear=function(){this.map.clear()},e.prototype.Keys=function(){return this.map.keys()},e.prototype.UpdateSSRCTimeMap=function(e){this.timemap=e},e.prototype.GetSSRCTimeMap=function(e){return this.timemap?this.timemap.get(e):null},e}();var n,s,i=!1,o=new a,l=10,d=!1,p=null,c=0,h=23,f=0,g=0,m=null,y=null,M=new Map,b=0;function v(e,t,r,u){if(e=0,i&&o){var a=o.AudioQueueMGR.GetQueue(e);if(a||(a=o.AudioQueueMGR.AddQueue(e)),r){var n=r.length/12,d=0,p=0;for(d=0;d<n;d++){e=0;for(p=12*d+0;p<12*d+4;p++)e+=r[p]*Math.pow(256,p-12*d);e>>=10;var c=0;for(p=12*d+4;p<12*d+12;p++)c+=r[p]*Math.pow(256,p-12*d-4);M.set(e,c)}var h=t;A(r)}else h=t;a.enqueue(h);var f=o?o.AudioQueueMGR.GetQueueLength(0):0;if(f>7)s&&s.postMessage({status:"delay"});else if(f>50)for(var g=f-l;g>=0;)Q(e),g--}}function Q(e){if(0,o){var t=o.AudioQueueMGR.GetQueue(0);if(t){var r=t.dequeue();return A(r),r}return null}}function A(e){if(s){var t={status:"trash",data:e};s.postMessage(t,[t.data.buffer])}}registerProcessor("zoomAudioWorklet",class extends AudioWorkletProcessor{static get parameterDescriptors(){return[{name:"pcm",defaultValue:1}]}constructor(){super(),this.port.onmessage=this.handleMessage.bind(this),this.sampleRate_=0,this.tenMilliSecondsLength_=0}handleMessage(e){var t=e.data;switch(t.status){case"data":i&&(v(t.data.ssrc,t.data.data,t.data.time),p=t.data.ssrc);break;case"stopPlayAudio":i=!1;break;case"startPlayAudio":i=!0;break;case"close":break;case"StartCaptureAudio":d=!0,f=0;break;case"CurrentSSRC":p=t.data;break;case"encodeAudioPort":n&&n.close(),n=e.ports[0];break;case"decodeAudioPort":s&&s.close(),(s=e.ports[0]).onmessage=function(e){i&&(v(e.data.ssrc,e.data.data,e.data.time),p=e.data.ssrc)};break;case"decodeAudioPortWithVideo":y=e.ports[0];break;case"sampleRate":this.sampleRate_=t.data,this.sampleRate_>=8e3&&(this.tenMilliSecondsLength_=this.sampleRate_/100,g=Math.ceil(3*this.tenMilliSecondsLength_/128),m=new Float32Array(128*g))}}process(e,t,r){let u=e[0],a=t[0];if(!this.sampleRate_||!a[0])return!0;if(function(e,t,r,u){if(o){var a=o.AudioQueueMGR.GetQueue(0),n=null;if(a){if(a.residue){let e=a.residue.length-b;if(e>r)return u.set(a.residue.subarray(b,b+r),u.length-r),void(b+=r);if(e===r)return u.set(a.residue.subarray(b,b+r),u.length-r),A(a.residue),a.residue=null,void(b=0);n=a.residue,u.set(a.residue.subarray(b,n.length),u.length-r),A(a.residue),a.residue=null,b=0,r-=e}for(var s=a.dequeue();s&&s.length<r;)u.set(s,u.length-r),A(s),r-=s.length,s=a.dequeue();if(s){if(s.length===r)return u.set(s,u.length-r),b=0,void A(s);s.length>r&&(u.set(s.subarray(0,r),u.length-r),a.residue=s,b=r)}}}}(0,0,a[0].length,a[0]),u[0]&&d&&(m.set(u[0],128*f),++f==g&&(f=0,n.postMessage({command:"EncodeAudioFrame",data:m}))),p&&++c==h){c=0;var s=function(e){if(e>>=10,o){var t=M.get(e);return t?(M.set(e,0),t):0}}(p);s&&(y?y.postMessage({data:s}):this.port.postMessage({status:"InstantAudioTime",data:s}))}for(let e=1;e<a.length;++e)a[e].set(a[0]);return!0}})}]);